> 建库字段

机器人id（鉴权令牌）：String 		robotId

目标用户：String		pin

目标咚咚群：String	

推送信息：text

图片上传：String   	记录图片地址	pictureList

文件上传：String	fileList

####  机器人是否在线

1. 调用方式：HTTP GET

> /output/robot/online

> headers

| 字段名称    | 字段说明 |  类型  | 必填 | 备注 |
| ----------- | :------: | :----: | :--: | ---: |
| robot-token | 鉴权令牌 | string |  Y   |      |

> response body

```
{
        "code": "200",
        "msg": "success",
        "data": {
            "robotName": "京东云智能小助手",
            "wxId": "wxid_4lddohw3f6or12",
            "status": true
        }
    }
```



| 字段名称  |  字段说明  |  类型  | 必填 | 备注 |
| --------- | :--------: | :----: | :--: | ---: |
| robotName | 机器人昵称 | string |      |      |
| robotId   | 机器微信ID | string |      |      |
| status    |  是否在线  |  bool  |      |      |



#### 根据PIN发送群聊文字消息

1. 调用方式：HTTP POST

> /output/robot/sendChatRoomMsgByPin

> headers

| 字段名称     |     字段说明     |  类型  | 必填 | 备注 |
| ------------ | :--------------: | :----: | :--: | ---: |
| robot-token  |     鉴权令牌     | string |  Y   |      |
| Content-Type | application/json | string |  Y   |      |

> request body

```
{
        "robotId": "wxid_4lddohw3f6or12",
	    "pin": ["test1","test2"],
        "message":"test message"
    }
```

| 字段名称 |  字段说明   |   类型   | 必填 | 备注 |
| -------- | :---------: | :------: | :--: | ---: |
| robotId  | 机器微信ID  |  string  |  Y   |      |
| pin      | 客户pin列表 | string[] |  Y   |      |
| message  |    消息     |  string  |  Y   |      |

> response body

```
{
        "code": "200",
        "msg": "send message success, sent to 2 group chatroom"
    }
```

| 字段名称 |            字段说明             |  类型  | 必填 | 备注 |
| -------- | :-----------------------------: | :----: | :--: | ---: |
| code     | 状态码 100 代表失败 200代表成功 | string |      |      |

#### 

#### 根据PIN发送群聊图片消息

1. 调用方式：HTTP POST

> /output/robot/sendChatRoomPictureMsgByPin

> headers

| 字段名称     |     字段说明     |  类型  | 必填 | 备注 |
| ------------ | :--------------: | :----: | :--: | ---: |
| robot-token  |     鉴权令牌     | string |  Y   |      |
| Content-Type | application/json | string |  Y   |      |

> request body

```
{
	"robotId": "wxid_4lddohw3f6or12",
	"pin": ["test1","test2"],
	"pictureList": ["https://robot-picture.s3.cn-east-2.jdcloud-oss.com/picture/2022/02/21/1759920030.png?AWSAccessKeyId=JDC_4C11AC70FE57E444EE4874D49536&Expires=1652521874&Signature=wdjXjlo7NsRC0hCfUpeUMwClzL8%3D"]
}
```

| 字段名称    |  字段说明   |   类型   | 必填 | 备注 |
| ----------- | :---------: | :------: | :--: | ---: |
| robotId     | 机器微信ID  |  string  |  Y   |      |
| pin         | 客户pin列表 | string[] |  Y   |      |
| pictureList | 图片url列表 | string[] |  Y   |      |

> response body

```
{
        "code": "200",
        "msg": "send message success, sent to 2 group chatroom"
    }
```

| 字段名称 |            字段说明             |  类型  | 必填 | 备注 |
| -------- | :-----------------------------: | :----: | :--: | ---: |
| code     | 状态码 100 代表失败 200代表成功 | string |      |      |

> 支持图片类型

- .png
- .jpg



####  根据PIN发送群聊文件消息

1. 调用方式：HTTP POST

> /output/robot/sendChatRoomFileMsgByPin

> headers

| 字段名称     |     字段说明     |  类型  | 必填 | 备注 |
| ------------ | :--------------: | :----: | :--: | ---: |
| robot-token  |     鉴权令牌     | string |  Y   |      |
| Content-Type | application/json | string |  Y   |      |

> request body

```
{
	"robotId": "wxid_4lddohw3f6or12",
	"pin": ["test1","test2"],
	"fileList": ["https://robot-picture.s3.cn-east-2.jdcloud-oss.com/picture/2022/02/21/1759920030.png?AWSAccessKeyId=JDC_4C11AC70FE57E444EE4874D49536&Expires=1652521874&Signature=wdjXjlo7NsRC0hCfUpeUMwClzL8%3D"]
}
```

| 字段名称 |  字段说明   |   类型   | 必填 | 备注 |
| -------- | :---------: | :------: | :--: | ---: |
| robotId  | 机器微信ID  |  string  |  Y   |      |
| pin      | 客户pin列表 | string[] |  Y   |      |
| fileList | 文件url列表 | string[] |  Y   |      |

> response body

```
{
        "code": "200",
        "msg": "send message success, sent to 2 group chatroom"
    }
```

| 字段名称 |            字段说明             |  类型  | 必填 | 备注 |
| -------- | :-----------------------------: | :----: | :--: | ---: |
| code     | 状态码 100 代表失败 200代表成功 | string |      |      |

> 注意事项

- 发送文件大小最好小于200m

#### 注意事项

```
请确保发送的chatRoomId在token允许列表中,否则消息将不会发送至相应的群聊中
    通过pin发送消息时请确保pin已经配置映射列表
```

#### robot-token申请

请发送邮件至wuxinlei@jd.com或咚咚联系wuxinlei





### sendMsg()逻辑

pin、msg、pictureurl、fileurl

1. 校验pin是否为空，为空则捕获消息打印错误日志，返回null
2. 判断是否msg、picture、file都为空，都为空捕获打印错误日志，返回null
3. 判断msg是否为空，不为空，获取机器人id，调用机器人根据pin发送文字消息
4. 判断文件和图片是否为空，不为空同上
5. 

