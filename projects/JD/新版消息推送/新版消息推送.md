# 新版消息推送



# 一、 版本信息

- 版本号：2.0

- 创建日期：2023-01-03



# 二、 变更日志

| **时间** | **版本号** | **变更人** | **主要变更内容** |
| -------- | ---------- | ---------- | ---------------- |
|          |            |            |                  |
|          |            |            |                  |
|          |            |            |                  |



# 三、 文档说明

名词解释



| **术语 / 缩略词** | **说明**                                                     |
| ----------------- | ------------------------------------------------------------ |
| 标签              | 针对某一产品/或具有某种特征类型的客户的标记· 你可以根据角色设置标签，如财务、行政、出纳，设置后，审批流程可添加标签为审批人· 你还可以根据地域、身份设置为标签，如华南区，发送消息或设置规则也可选择标签 |
| 打标              | 将已有标签赋予给某个客户/客户群的过程叫做打标                |
| 素材库            | 用于存储未推送消息的资源/模版                                |

# 

# 四、 需求背景

## 1、产品 / 数据现状

现在的消息推送 推送粒度是以群聊为推送维度的，并且无审批流、标签功能，消息推送粒度无法更好的控制

新版的消息推送需要以客户为推送维度，并且加入审批流、标签管理、草稿、历史发送管理、资源库管理等功能,实现可控粒度的消息推送功能。



## 2、产品调研



以下为企业微信的消息推送



发送消息



![img](https://apijoyspace.jd.com/v1/files/eVMODoWf7CCupMdAzHte/link)









![img](https://apijoyspace.jd.com/v1/files/iiHVcX46wtK0nxTBOBcg/link)



已发送消息管理

![img](https://apijoyspace.jd.com/v1/files/BGYt9CHkWNhTPzmnBfu8/link)



素材库管理



![img](https://apijoyspace.jd.com/v1/files/kD23KfTetOVoZU9CEf5N/link)





标签管理

![img](https://apijoyspace.jd.com/v1/files/5GsZuYOz9NypBaBFDrqm/link)







# 五、 接口列表

## 1、消息推送功能模块

### 1.1、图片上传接口

### 1.2、文件上传接口

### 1.3、另存为草稿接口

### 1.4、消息推送接口

### 1.5、客户信息列表获取接口(无分页)

### 1.6、标签列表获取接口(无分页)



## 2、已发送信息管理功能（根据用户ID区分不同用户消息）

### 2.1、根据用户token获取已发送信息列表获取(有分页) 

### 2.2、根据ID获取已发送消息/草稿内容详情

### 2.3、根据ID编辑草稿信息

### 2.4、删除草稿信息记录（软删除，该接口不支持删除已成功发送的消息记录）



## 3、审批流管理

### 3.1、获取指定用户发起的审批记录列表

### 3.2、用户撤回正在审批的信息接口



## 4、资源库管理

### 4.1、创建资源接口(只创建资源，不会调用审批和消息推送)

### 4.2、根据资源ID编辑已有资源信息接口

### 4.3、根据资源ID删除已有资源信息接口(软删除)

### 4.4、根据资源ID获取指定的资源详细信息